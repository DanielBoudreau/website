<!DOCTYPE html>
<html lang="en">

<head>
 <meta http-equiv="content-type" content="text/html; charset=utf-8">
 <title>
    JMRI: Release Notes for 5.1.3
 </title>
    <meta content="Bob Jacobsen" name="author">
    <meta name="keywords" content="java model railroad JMRI 5.1.3 decoderpro panelpro loconet lenz nce easydcc dcc nmra">

 <!--#include virtual="/Style.shtml" -->
</head>

<body>
<!--#include virtual="/Header.shtml" -->

<div id="mBody">
    <!--#include virtual="../download/Sidebar.shtml" -->
    <div id="mainContent">
      <h1>
      Release Notes for JMRI 5.1.3 release
      </h1>

    <p>Date: MMM DD, 2022</p>
    <p>From: (release pumpkin)</p>
    <p>Subject: Test Release 5.1.3 of JMRI/DecoderPro is available for download.</p>

<p><b>This is a draft release note only; the download links do not yet work</b></p>

<h2>Notes:</h2>

<p>This is a test release.  Please
<a href="https://groups.io/g/jmriusers">post a note</a>
if you encounter any new or old bugs!
And please back up your JMRI files before installing this, in case you want to go
back to an earlier version.</p>

<p>This is the next in a series of 5.1.* test releases.
It requires Java 11 to work.
(See <a href="http://jmri.org/java">our page on downloading Java 11</a>)
We expect this series to end in the next JMRI 5.2 production release in December 2022.
(See the <a href="https://github.com/JMRI/JMRI/milestones?direction=asc&sort=due_date&state=open"><em>tentative</em> release schedule</a>)
</p>

<p>Some of the changes involved are quite extensive.
They may require a certain amount of experience before they are working well.
Therefore, this test release should be considered experimental.</p>

<p><b>
JMRI is now only available under the
<a href="/COPYING">GNU General Public License</a>. For more information, please
see our
<a href="/Copyright.html">copyright and licensing page</a>.</b></p>

<a id="update" name="update"></a>
<h3>Update From Older JMRI Versions</h3>

If you are currently using a version older than JMRI 4.24, please follow these instructions carefully:
<ol>
<li>Is your current version older than <a href="jmri4.12.shtml">JMRI 4.12</a>?
    If so, then update to <a href="jmri4.12.shtml">JMRI 4.12</a> first, and ensure everything works correctly: check
    start-up, check things you need to be working, and check the JMRI log as well) before doing anything else.
    Store your configuration and panel files under a new name and use those from now on.
    Then continue with step 2.
    <p>
    If you are currently using JMRI 4.7.3 or earlier on Linux or macOS (Windows doesn't need this),
    then it's <u>very important</u>
    that you update to <a href="jmri4.12.shtml">JMRI 4.12</a> and
    carrying out the <a href="jmri4.12.shtml#migration">migration process described in the JMRI 4.12 release note</a>
    before updating to any later release.
    </li>

<li>Is your current version older than <a href="jmri4.20.shtml">JMRI 4.20</a>?
    Then update to <a href="jmri4.20.shtml">JMRI 4.20</a> first, and ensure that works correctly (check
    start-up, check things you need to be working, and check the JMRI log as well) before doing anything else
    Save your preferences again.
    Store your configuration and panel files under a new name, use those from now on, and go on to step 3.</li>

<li>Is your current version older than <a href="jmri4.24.shtml">JMRI 4.24</a>?
    Then update to <a href="jmri4.24.shtml">JMRI 4.24</a> first, and ensure that works correctly (check
    start-up, check things you need to be working, and check the JMRI log as well) before doing anything else
    Save your preferences again.
    Store your configuration and panel files under a new name and use those from now on.</li>

<li>You can then install this release.

</ol>

Following this multi-step order of updating via stable major releases safeguards you against possible migration issues
that can arise from skipping these versions.

<a id="problems" name="problems"></a>
<h3>New problems with this release</h3>
<ul>
    <li>None yet</li>
</ul>
<!--
If any of those affect you, please either
wait for
<a href="jmri5.1.4.shtml">JMRI 5.1.4</a>, due out shortly after this one,
or (once there's a fix for the problem) pick up a
<a href="https://builds.jmri.org/jenkins/job/development/job/packages/">JMRI development build installer</a>
from
<a href="https://builds.jmri.org/jenkins/job/development/job/packages/">Jenkins</a>.</p>
 -->

<a id="warnings" name="warnings"></a>
<h3>New warnings for this release:</h3>

<ul>
    <li>
        None yet
    </li>
</ul>


<h3>Older warnings</h3>

See the <a href="jmri5.0.shtml#warnings">JMRI 5.0 release note</a> for more warnings predating the 5.1 development series,
including pointers to various migration issues.
These may be relevant to you if you're updating from an earlier version;
we strongly recommend you update to at least <a href="jmri4.20.shtml">JMRI 4.20</a>
before installing this test release.

<ul>
    <li><span class="since">Since <a href="jmri4.99.1.shtml">JMRI 4.99.1</a></span>
        This test release, and all subsequent ones, require the use of
        Java 11 or later.  Java 8 is explicitly not supported.
        There's more information on this migration on the
        <a href="https://www.jmri.org/help/en/html/doc/Technical/TechRoadMap.shtml">JMRI Tech Road Map</a> and
        <a href="https://www.jmri.org/help/en/html/doc/Technical/JVMCapabilities.shtml">JVM Capabilities</a> pages.
    </li>
    <li><span class="since">Since <a href="jmri4.99.1.shtml">JMRI 4.99.1</a></span>
        This version no longer reads ZeroConf IPv4 and IPv6 preferences
        written with JMRI 4.16 and before.  Please make sure to upgrade
        to JMRI 4.20 (or later) and save your preferences before
        updating to this version if you have configured the WiThrottle preference pane.</li>
</ul>

<a id="download" name="download"></a>
<h2>Download links:</h2>

<!--
<div class="wide">
<ul>
<li>OS X / macOS: <a
	href="https://github.com/JMRI/JMRI/releases/download/v4.25.5/JMRI.4.25.5+R8682bb138b.dmg">https://github.com/JMRI/JMRI/releases/download/v4.25.5/JMRI.4.25.5+R8682bb138b.dmg</a><br/>
  sha256: bf461db161a478cc11a6e0107bfd1139f338ebadd19c68d81946659827856474 </li>

<li>Windows: <a
	href="https://github.com/JMRI/JMRI/releases/download/v4.25.5/JMRI.4.25.5+R8682bb138b.exe">https://github.com/JMRI/JMRI/releases/download/v4.25.5/JMRI.4.25.5+R8682bb138b.exe</a><br/>
   sha256: 03f795a562c3aee91935be9a3cfbf6c60ae2fd831a25cf87ea7c8769b4311683</li>

<li>Linux: <a
	href="https://github.com/JMRI/JMRI/releases/download/v4.25.5/JMRI.4.25.5+R8682bb138b.tgz">https://github.com/JMRI/JMRI/releases/download/v4.25.5/JMRI.4.25.5+R8682bb138b.tgz</a><br/>
   sha256: 7bb1fa846f8bdc115bda8d0d4ec6b67b816d4ee6cecc27cdbe89a0cc571c2e7e</li>
</ul>
</div>
 -->

Preliminary build files (not the final released files) can be found
on the
<a href="https://builds.jmri.org/jenkins/job/testreleases/job/5.1.3/">CI project page</a>.

<!--
During development leading to the actual release, you can find test download files on the
<a href="https://builds.jmri.org/jenkins/job/development/job/packages/">continuous integration build page</a>.
These are development files, and might not be working at any particular time.</p>
 -->

<a id="changes" name="changes"></a>
<h2>Changes since <a href="jmri5.1.2.shtml">Test Release 5.1.2</a>:</h2>

The <a href="https://github.com/JMRI/JMRI/issues?utf8=âœ“&q=milestone%3A5.1.3+is%3Amerged">list of included changes</a> is available from our
<a href="https://github.com/JMRI/JMRI">GitHub code repository</a>.


    <h3>Hardware Support</h3>
        <h4>CBUS</h4>
            <ul>
                <li>Updated [Pi-]SPROG (3v2|Plus) NV edit GUI</li>
                <li>Added Pi-SPROG 3 (not v2) NV edit GUI</li>
            </ul>

        <h4>NCE</h4>
            <ul>
                <li>Fixed a problem adding sensors with names like NS50:1
                </li>
            </ul>

        <h4>OpenLCB / LCC</h4>
            <ul>
                <li>Several fixes to JMRI's OpenLCB hub to reduce chance of duplicated traffic.</li>
                <li>Added ConsumerID, ProducerID buttons to OpenLCB console</li>
            </ul>

        <h4>Piko</h4>
        <ul>
          <li>A new definition file was added for the Uhlenbrock LocoNet IR Receiver #63830, that can
            connect the Piko Digi-fern Remote Control to LocoNet.</li>
        </ul>

        <h4>Raspberry Pi</h4>
            <ul>
                <li>A simulator is now added that simulates a Raspberry Pi.
                The simulator is very simple and is mostly intended to be
                able to load panels for a Raspberry Pi on a non Pi computer
                like Windows.</li>
            </ul>

        <h4>SPROG</h4>
            <ul>
                <li>Updated [Pi-]SPROG (3v2|Plus) NV edit GUI</li>
                <li>Added Pi-SPROG 3 (not v2) NV edit GUI</li>
                <li>Added F29+ support to SPROG Command Station mode.</li>
            </ul>

    <h3>New / Updated decoder definitions</h3>
        <ul>
          <li>An include file enum-WeekdaysSun.xml that can be used to create a drop down of Weekdays was added to
            xml/decoders/parts/</li>
        </ul>

        <h4>Dapol</h4>
            <ul>
                <li>Two Dapol Imperium DCC Decoders have been added.<br>
                860015: Next 18 6 Function decoders (NEM 662).<br>
                860019: 21 PIN 6 Function decoders (21MTC/NEM 660/MTX interface Standard).</li>
            </ul>

        <h4>Digikeijs (Digirails)</h4>
            <ul>
                <li>New decoder definition for DR5088RC with LNCV programming capabilities.<br>
                  Thanks to Dennis Cherry for testing on actual hardware.<br>
                Awaiting response from Digikeijs to complete the settings stored in LNCV4.</li>
              <li>The Stationary family of decoders was renamed to Feedback (Inputs).</li>
            </ul>

        <h4>Digitrax</h4>
            <ul>
                <li>Add support for DCS240+</li>
            </ul>

        <h4>Technologistic (train-O-matic)</h4>
            <ul>
                <li>Added support for Lokommander II decoders. Including automatic identification of the right decoder type based on productID.</li>
            </ul>

        <h4>Uhlenbrock</h4>
            <ul>
                <li>Updated the Lissy Reporter support, including
                improved display of the messages. Note that this
                has changed the format of the reports, so users
                who have written scripts to use this might need to
                check and update them.</li>
                <li>Added a decoder definition to configure the 63810 Mobile Station Adapter.<br>
                Use the LNCV tool to program.</li>
                <li>Added decoder definitions for Occupancy Feedback modules #63320/40 (2-rail) and #63330/50
                (3-rail).<br>
                Use the LNCV Tool for programming.</li>
                <li>Added Funk-Master LN+DCC 66410 definition. Renamed  model 66400 FunkMaster to Funk-Master LN.</li>
                <li>Added a decoder definition to configure the 63450 LocoNet Display module, also with LNCV</li>
                <li>New definition to program the IRIS LocoNet IR-Receiver #63830.</li>
                <li>Fixed a bug in the Switch Module #63410 definition that could mix up combined CV values of type
                XXXXC.</li>
                <li>Added setting Route 1 in the Track Control Signal indicator #69230</li>
                <li>Added a decoder definition to configure the 63400 LocoNet Switch Control module</li>
            </ul>

    <h3>DecoderPro</h3>
        <a id="DecoderPro" name="DecoderPro"></a>
        <ul>
            <li>To simplify writing a decoder definition, variable declarations for decimal and hex values without a
              "mask" with max &gt; 255  now will get an appropriately sized mask assigned so that they store any
              valid entry.<br>
              Variables with a max &lt;= 255 or with an explicit mask are not affected.
            </li>
          <li>In decoder definitions, enumVal variables can now use a so-called "radix" mask to map values on specific
            digits in the CV value. Requires decoder-4-15-2.xsd schema in the xml declaration.</li>
            <li>Values of type DecVar can now be presented using an offset and factor to reflect their application. For
              example if address 1 had to be entered as 0 (and 2 as 1) an offset of +1 would fix this for the user.
              Likewise, a factor of 50 would present a setting "in steps of 50 milliseconds" in ms units while saving
              it in the CV just like it used to.<br>
              Requires schema decoder-4-15-2.xsd. When a min or max is applied, the author should update that for the
              numbers as entered. Entries smaller than the offset are replaced by 0.
            </li>
        </ul>

   <h3>Dispatcher</h3>
        <a id="Dispatcher" name="Dispatcher"></a>
        <ul>
             <li>Support transits and sections that use multiple panels connected by edge
             connectors.</li>
             <li>The "Use connectivity from Layout Editor panels" option in Dispatcher Options
             no longer uses a specified panel.  All Layout Editor panels are used for layout
             connectivity.</li>
        </ul>

    <h3>LogixNG</h3>
        <a id="LogixNG" name="LogixNG"></a>
        <ul>
          <li>The action <i>Simulate turnout feedback</i> has been added.
          It's useful to simulate feedback based turnout actions when a
          simulator connection is used, for example the <i>LocoNet simulator</i>.</li>
          <li>The expression <i>Connection name</i> has been added.
          It's useful together with <i>Simulate turnout feedback</i> so
          that simulation only happens for simulated connections.</li>
          <li>The action <i>For each</i> has been added. It's useful when
          you want to loop thru all items in a list, for example all the
          sensors in the sensor manager.</li>
          <li>The formula function <i>new</i> has been added. It allows
          you to create a new instance of a class.</li>
          <li>Several formula constants have been added. See the modules
          <i>Java</i> and <i>Layout</i>. Examples are constants like
          <i>sensors</i> and <i>turnouts</i> that gives you direct access
          to the managers. And <i>InstanceManager</i> that gives you direct
          access to the instance manager. The constants <i>null</i> and
          <i>None</i> has the null value in Java, the None value in Jython.</li>
          <li>The action <i>Listen On Beans - Table</i> is improved.</li>
          <li>The action <i>Listen On Beans - Local variable</i> has been
          added. It can be used together with the <i>For each</i> action
          to listen to all beans of a manager.</li>
          <li>The expressions <i>Local Variable</i> and <i>Memory</i> now
          have the choice "Type" which allows you to select whenether the
          data should be treated as a number or a string. If "Number" is
          choosen, it's required that both operands are numbers. Otherwise
          an exception will occur.</li>
          <li>The action <i>Local Variable</i> can now copy the value of a
          reference.</li>
          <li>The action <i>If Then Else</i> now supports <i>Else_If</i>
          statements.</li>
          <li>The new category <i>Flow Control</i> is added. The actions
          <i>Call Module</i>, <i>For</i>, <i>For Each</i>, <i>Table: For
          Each</i> and <i>Sequence</i> are moved to this category, as well
          as the expression <i>Call Module</i>.</li>
          <li>The actions <i>Break</i>, <i>Continue</i>, <i>Error</i>,
          <i>Exit</i> and <i>Return</i> have been added to the <i>Flow
          Control</i> category.</li>
          <li>The expressions <i>And</i> and <i>Or</i> now have the option
          to only evaluate the sockets that are needed for the result.</li>
        </ul>

   <h3>Speedometer</h3>
        <a id="Speedometer" name="Speedometer"></a>
        <ul>
            <li>Expanded user documentation</li>
        </ul>

    <h3>Miscellaneous</h3>
        <a id="Misc" name="Misc"></a>
        <ul>
            <li><i>jmri.jmrix.SystemConnectionMemoManager</i> has new utility methods to find a connection by its connection name.<br>
            <code>LocoNetSystemConnectionMemo memo = SystemConnectionMemoManager.getConnection("L2", LocoNetSystemConnectionMemo.class);</code><br>
            <code>LocoNetSystemConnectionMemo memo = SystemConnectionMemoManager.getConnectionByUserName("LocoNet", LocoNetSystemConnectionMemo.class);</code><br>
            <code>MqttSystemConnectionMemo memo = SystemConnectionMemoManager.getConnection("M", MqttSystemConnectionMemo.class);</code>
            <code>MqttSystemConnectionMemo memo = SystemConnectionMemoManager.getConnectionByUserName("MQTT", MqttSystemConnectionMemo.class);</code>
            </li>
            <li>The PlantUML library has been updated to the current version.  This is used for
                developer documentation.
            </li>
        </ul>


   <!--#include virtual="/Footer.shtml" -->
  </div><!-- closes #mainContent-->
  </div> <!-- closes #mBody-->
  <script src="/js/main.js"></script>
</body>
</html>
